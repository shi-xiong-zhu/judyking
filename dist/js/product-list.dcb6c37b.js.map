{"version":3,"file":"js/product-list.dcb6c37b.js","mappings":"sJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,aAAa,GAAG,MAAQ,IAAIC,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAON,EAAIO,QAAQC,MAAO,GAAEC,YAAYT,EAAIU,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACV,EAAG,aAAa,CAACG,GAAG,CAAC,OAASL,EAAIa,eAAeC,MAAM,CAACC,MAAOf,EAAIe,MAAOC,SAAS,SAAUC,GAAMjB,EAAIe,MAAME,CAAI,EAACC,WAAW,WAAWhB,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,cAAe,EAACe,OAAM,OAAUjB,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,UAAU,KAAO,QAAQC,GAAG,CAAC,MAAQL,EAAIoB,YAAYN,MAAM,CAACC,MAAOf,EAAIqB,OAAQL,SAAS,SAAUC,GAAMjB,EAAIqB,OAAOJ,CAAI,EAACC,WAAW,WAAWlB,EAAIsB,GAAItB,EAAIuB,MAAM,SAASC,GAAM,OAAOtB,EAAG,UAAU,CAACS,IAAIa,EAAKC,KAAKrB,MAAM,CAAC,MAAQoB,EAAKC,OAAQ,IAAE,GAAGvB,EAAG,WAAW,CAACE,MAAM,CAAC,SAAWJ,EAAI0B,SAAS,gBAAgB,UAAU,mBAAkB,GAAOrB,GAAG,CAAC,KAAOL,EAAI2B,QAAQb,MAAM,CAACC,MAAOf,EAAI4B,QAASZ,SAAS,SAAUC,GAAMjB,EAAI4B,QAAQX,CAAI,EAACC,WAAW,YAAYlB,EAAIsB,GAAItB,EAAI6B,MAAM,SAASL,GAAM,OAAOtB,EAAG,WAAW,CAACS,IAAIa,EAAKM,SAAS,CAAC5B,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQoB,EAAKO,aAAa,KAAOP,EAAKQ,WAAW,MAAQR,EAAKS,UAAU,MAAQT,EAAKU,kBAAkB,EAAG,IAAE,IAAI,EAChnC,EACGC,EAAkB,G,UCoDtB,GACAC,KAAAA,MACAC,WAEAC,EAAAA,EAAAA,IACA,kBACA,kCACA,WACA,cACAC,MAAAC,IACA,sBACAC,QAAAA,IAAAA,EAAAA,GAEA,EACAC,WAAAA,CAAAA,EACAF,OACA,OACAzB,MAAAA,GACA4B,WAAAA,EACAtB,OAAAA,EACAQ,KAAAA,GACAD,SAAAA,EACAF,UAAAA,EACAkB,QAAAA,GACArB,KAAAA,CACA,CACAE,KAAAA,KACAmB,QAAAA,aAEA,CACAnB,KAAAA,KACAmB,QAAAA,OAEA,CACAnB,KAAAA,KACAmB,QAAAA,UAIA,EACAC,QAAAA,CAEAhC,cAAAA,GACA,SACA,iBACA,iBAGA,kBAEA,aACA,EAOAc,SACA,iBACA,iBACA,kBAEA,kBACAmB,EAAAA,EAAAA,IAAAA,KAAAA,aAAAA,KAAAA,MAAAA,KAAAA,SAAAA,MACAN,IACA,wBACA,kBAEA,wCACAC,QAAAA,IAAAA,KAAAA,MACA,mBAIA,GAEAM,MAAAA,CAEA1B,OAAAA,CACA2B,QAAAA,SAAAA,GACA,kCAEA,kBAEA,aAEA,iBACA,aACA,EACAC,WAAAA,KChJ+P,I,UCQ3PC,GAAY,OACd,EACAnD,EACAoC,GACA,EACA,KACA,WACA,MAIF,EAAee,EAAiB,O","sources":["webpack://myapp/./src/views/Search/Search.vue","webpack://myapp/src/views/Search/Search.vue","webpack://myapp/./src/views/Search/Search.vue?f73d","webpack://myapp/./src/views/Search/Search.vue?3e52"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-nav-bar',{attrs:{\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-search',{on:{\"search\":_vm.handlerSearch},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_c('van-icon',{attrs:{\"name\":\"ellipsis\"}})]},proxy:true}])}),_c('van-tabs',{attrs:{\"color\":\"#08d9d6\",\"type\":\"card\"},on:{\"click\":_vm.handlerEle},model:{value:(_vm.action),callback:function ($$v) {_vm.action=$$v},expression:\"action\"}},_vm._l((_vm.tabs),function(item){return _c('van-tab',{key:item.text,attrs:{\"title\":item.text}})}),1),_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"触碰我的底线了\",\"immediate-check\":false},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item){return _c('van-cell',{key:item.goodsId},[_c('van-card',{attrs:{\"price\":item.sellingPrice,\"desc\":item.goodsIntro,\"title\":item.goodsName,\"thumb\":item.goodsCoverImg}})],1)}),1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <van-nav-bar\r\n      left-arrow\r\n      @click-left=\"$router.back()\"\r\n      fixed\r\n    >\r\n      <template #right>\r\n        <van-search\r\n          v-model=\"value\"\r\n          @search=\"handlerSearch\"\r\n        />\r\n        <van-icon name=\"ellipsis\" />\r\n      </template>\r\n    </van-nav-bar>\r\n    <!--  -->\r\n    <van-tabs\r\n      color=\"#08d9d6\"\r\n      type=\"card\"\r\n      v-model=\"action\"\r\n      @click=\"handlerEle\"\r\n    >\r\n      <van-tab\r\n        v-for=\"item in tabs\"\r\n        :key=\"item.text\"\r\n        :title=\"item.text\"\r\n      >\r\n      </van-tab>\r\n    </van-tabs>\r\n\r\n    <van-list\r\n      v-model=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"触碰我的底线了\"\r\n      @load=\"onLoad\"\r\n      :immediate-check=\"false\"\r\n    >\r\n      <van-cell\r\n        v-for=\"item in list\"\r\n        :key=\"item.goodsId\"\r\n      >\r\n        <van-card\r\n          :price=\"item.sellingPrice\"\r\n          :desc=\"item.goodsIntro\"\r\n          :title=\"item.goodsName\"\r\n          :thumb=\"item.goodsCoverImg\"\r\n        />\r\n      </van-cell>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { SearchFromhome, categoryGohome } from \"../../api/index\";\r\nexport default {\r\n  name: \"App\",\r\n  created() {\r\n    //从三级分类带id进行搜索 \r\n    categoryGohome(\r\n      this.pageNumber++,\r\n      this.$route.query.goodsCategoryId,\r\n      this.value,\r\n      this.orderBy\r\n    ).then((data) => {\r\n      this.list = data.data.list;\r\n      console.log(data);\r\n    });\r\n  },\r\n  components: {},\r\n  data() {\r\n    return {\r\n      value: \"\", //输入的关键词\r\n      pageNumber: 1,\r\n      action: 0, //默认选中那个tab\r\n      list: [], //搜索出来的列表数据\r\n      loading: false, //未在加载状态\r\n      finished: false, //是否已加载完成，加载完成后不再触发load事件\r\n      orderBy: \"\", //来自tabs[val].orderBy\r\n      tabs: [\r\n        {\r\n          text: \"推荐\",\r\n          orderBy: \"recommend\",\r\n        },\r\n        {\r\n          text: \"新品\",\r\n          orderBy: \"new\",\r\n        },\r\n        {\r\n          text: \"价格\",\r\n          orderBy: \"price\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    // 搜索时触发\r\n    handlerSearch(val) {\r\n      if (val === \"\") {\r\n        this.finished = true;\r\n        this.loading = false;\r\n      }\r\n      // 进到搜索页面会请求一次，在搜索时会从第二页开始\r\n      this.pageNumber = 1;\r\n      // 执行列表加载函数  发送请求\r\n      this.onLoad();\r\n    },\r\n    //切换tab时执行\r\n    // handlerEle() {\r\n    //   this.finished = true;\r\n    // },\r\n    // \r\n    // 实现懒加载\r\n    onLoad() {\r\n      if (this.value === \"\") {\r\n        this.finished = true;\r\n        this.loading = false;\r\n      } else {\r\n        this.finished = false;\r\n        SearchFromhome(this.pageNumber++, this.value, this.orderBy).then(\r\n          (data) => {\r\n            if (data.data.list.length == 0) {\r\n              this.finished = true;\r\n            }\r\n            this.list = this.list.concat(data.data.list);\r\n            console.log(this.list);\r\n            this.loading = false;\r\n          }\r\n        );\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    // 监听action的值（立即侦听开启）\r\n    action: {\r\n      handler: function (val) {\r\n        this.orderBy = this.tabs[val].orderBy;\r\n        // 在发送ajax之前，需要把pageNumber变成1\r\n        this.pageNumber = 1;\r\n        // 把list清空\r\n        this.list = [];\r\n        // 切换新的tab之后，finished要设置成false，因为之前有可能变成了true\r\n        this.finished = false;\r\n        this.onLoad();\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.van-search {\r\n  padding: 0.26667rem 1rem;\r\n}\r\n\r\n.van-tabs {\r\n  width: 100%;\r\n  position: fixed;\r\n  top: 1.2rem;\r\n  z-index: 999;\r\n\r\n  .van-tab {\r\n    width: 100%;\r\n    border: 1px solid #08d9d6;\r\n  }\r\n}\r\n\r\n.van-list {\r\n  margin-top: 2rem;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=69fa903e&scoped=true&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=69fa903e&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69fa903e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","on","$event","$router","back","scopedSlots","_u","key","fn","handlerSearch","model","value","callback","$$v","expression","proxy","handlerEle","action","_l","tabs","item","text","finished","onLoad","loading","list","goodsId","sellingPrice","goodsIntro","goodsName","goodsCoverImg","staticRenderFns","name","created","categoryGohome","then","data","console","components","pageNumber","orderBy","methods","SearchFromhome","watch","handler","immediate","component"],"sourceRoot":""}