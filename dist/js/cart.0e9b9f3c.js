"use strict";(self["webpackChunkmyapp"]=self["webpackChunkmyapp"]||[]).push([[511],{6541:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var n=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{attrs:{title:"购物车","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}},scopedSlots:t._u([{key:"right",fn:function(){return[e("van-icon",{attrs:{name:"ellipsis"}})]},proxy:!0}])}),e("div",{staticClass:"container"},t._l(t.list,(function(s){return e("van-swipe-cell",{key:s.goodsId,scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除"},on:{click:function(e){return t.deleteCartitem(s.cartItemId)}}})]},proxy:!0}],null,!0)},[e("van-checkbox",{staticClass:"van-check",model:{value:s.checked,callback:function(e){t.$set(s,"checked",e)},expression:"item.checked"}}),e("van-card",{staticClass:"goods-card",attrs:{price:s.sellingPrice,desc:"描述信息",title:s.goodsName,thumb:s.goodsCoverImg}}),e("van-stepper",{attrs:{value:s.goodsCount,"async-change":""},on:{change:function(e){return t.onChange(e,s.cartItemId)}}})],1)})),1),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.list.length,expression:"!list.length"}],staticClass:"empty",on:{click:function(e){return t.goHome()}}},[e("i",{staticClass:"van-icon van-icon-smile-o"}),e("div",{staticClass:"title"},[t._v("购物车空空空如也")]),t._m(0)]),e("van-submit-bar",{directives:[{name:"show",rawName:"v-show",value:t.list.length,expression:"list.length"}],attrs:{price:t.totalMoney,"button-text":"提交订单"},on:{submit:t.onsubmit},scopedSlots:t._u([{key:"tip",fn:function(){},proxy:!0}])},[e("van-checkbox",{model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")])],1)],1)},a=[function(){var t=this,e=t._self._c;return e("button",{staticClass:"van-button van-button--primary van-button--normal van-button--block",staticStyle:{color:"rgb(255, 255, 255)",background:"rgb(27, 174, 174)","border-color":"rgb(27, 174, 174)"}},[e("span",{staticClass:"van-button__text"},[t._v("前往首页")])])}],o=(s(6743),s(8848)),c=s(9547),i={name:"Cart",mounted(){this.$store.dispatch("changeCartListAsync")},data(){return{value:1}},methods:{goHome(){this.$router.push("/home"),console.log(this)},onsubmit(){let t=[];this.list.forEach((e=>{1==e.checked&&t.push(e.cartItemId)}));let e=JSON.stringify(t);sessionStorage.setItem("ids",e),this.$router.push({path:"/addressList"})},deleteCartitem(t){deleteCartList(t),this.$store.dispatch("changeCartListAsync")},onChange(t,e){o.Z.loading({forbidClick:!0}),(0,c.B)(e,t).then((t=>{200===t.resultCode&&(o.Z.clear(),this.$store.dispatch("changeCartListAsync"))}),(t=>{o.Z.fail("商品上限！")}))}},computed:{list:{get(){return this.$store.state.cartList}},totalMoney(){return this.list.reduce(((t,e)=>t+(e.checked?e.goodsCount*e.sellingPrice*100:0)),0)},checkAll:{get(){return this.list.every((t=>t.checked))},set(t){console.log(t),this.list.forEach((e=>e.checked=t))}}}},r=i,l=s(1001),u=(0,l.Z)(r,n,a,!1,null,"b6168fbe",null),h=u.exports}}]);
//# sourceMappingURL=cart.0e9b9f3c.js.map