{"version":3,"file":"js/cart.0e9b9f3c.js","mappings":"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","sources":["webpack://myapp/./src/views/Cart/Cart.vue","webpack://myapp/src/views/Cart/Cart.vue","webpack://myapp/./src/views/Cart/Cart.vue?2821","webpack://myapp/./src/views/Cart/Cart.vue?7497"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"购物车\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"ellipsis\"}})]},proxy:true}])}),_c('div',{staticClass:\"container\"},_vm._l((_vm.list),function(item){return _c('van-swipe-cell',{key:item.goodsId,scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-button',{staticClass:\"delete-button\",attrs:{\"square\":\"\",\"text\":\"删除\"},on:{\"click\":function($event){return _vm.deleteCartitem(item.cartItemId)}}})]},proxy:true}],null,true)},[_c('van-checkbox',{staticClass:\"van-check\",model:{value:(item.checked),callback:function ($$v) {_vm.$set(item, \"checked\", $$v)},expression:\"item.checked\"}}),_c('van-card',{staticClass:\"goods-card\",attrs:{\"price\":item.sellingPrice,\"desc\":\"描述信息\",\"title\":item.goodsName,\"thumb\":item.goodsCoverImg}}),_c('van-stepper',{attrs:{\"value\":item.goodsCount,\"async-change\":\"\"},on:{\"change\":function($event){return _vm.onChange($event, item.cartItemId)}}})],1)}),1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.list.length),expression:\"!list.length\"}],staticClass:\"empty\",on:{\"click\":function($event){return _vm.goHome()}}},[_c('i',{staticClass:\"van-icon van-icon-smile-o\"}),_c('div',{staticClass:\"title\"},[_vm._v(\"购物车空空空如也\")]),_vm._m(0)]),_c('van-submit-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.list.length),expression:\"list.length\"}],attrs:{\"price\":_vm.totalMoney,\"button-text\":\"提交订单\"},on:{\"submit\":_vm.onsubmit},scopedSlots:_vm._u([{key:\"tip\",fn:function(){return undefined},proxy:true}])},[_c('van-checkbox',{model:{value:(_vm.checkAll),callback:function ($$v) {_vm.checkAll=$$v},expression:\"checkAll\"}},[_vm._v(\"全选\")])],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('button',{staticClass:\"van-button van-button--primary van-button--normal van-button--block\",staticStyle:{\"color\":\"rgb(255, 255, 255)\",\"background\":\"rgb(27, 174, 174)\",\"border-color\":\"rgb(27, 174, 174)\"}},[_c('span',{staticClass:\"van-button__text\"},[_vm._v(\"前往首页\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- nav-bar -->\r\n    <van-nav-bar title=\"购物车\" left-arrow @click-left=\"$router.back()\">\r\n      <template #right>\r\n        <van-icon name=\"ellipsis\" />\r\n      </template>\r\n    </van-nav-bar>\r\n    <div class=\"container\">\r\n      <!-- 加入购物车的商品 -->\r\n      <van-swipe-cell v-for=\"item in list\" :key=\"item.goodsId\">\r\n        <van-checkbox class=\"van-check\" v-model=\"item.checked\"></van-checkbox>\r\n        <van-card\r\n          :price=\"item.sellingPrice\"\r\n          desc=\"描述信息\"\r\n          :title=\"item.goodsName\"\r\n          class=\"goods-card\"\r\n          :thumb=\"item.goodsCoverImg\"\r\n        />\r\n        <!-- <van-stepper\r\n          v-model='item.goodsCount'\r\n          @plus=\"add(item.cartItemId, item.goodsCount + 1)\"\r\n          @minus=\"del(item.cartItemId, item.goodsCount - 1)\"\r\n        /> -->\r\n\r\n        <van-stepper\r\n          :value=\"item.goodsCount\"\r\n          async-change\r\n          @change=\"onChange($event, item.cartItemId)\"\r\n        />\r\n\r\n        <template #right>\r\n          <van-button\r\n            square\r\n            text=\"删除\"\r\n            class=\"delete-button\"\r\n            @click=\"deleteCartitem(item.cartItemId)\"\r\n          />\r\n        </template>\r\n      </van-swipe-cell>\r\n    </div>\r\n    <div class=\"empty\" v-show=\"!list.length\" @click=\"goHome()\">\r\n      <i class=\"van-icon van-icon-smile-o\"></i>\r\n      <div class=\"title\">购物车空空空如也</div>\r\n      <button\r\n        class=\"van-button van-button--primary van-button--normal van-button--block\"\r\n        style=\"\r\n          color: rgb(255, 255, 255);\r\n          background: rgb(27, 174, 174);\r\n          border-color: rgb(27, 174, 174);\r\n        \"\r\n      >\r\n        <span class=\"van-button__text\">前往首页</span>\r\n      </button>\r\n    </div>\r\n\r\n    <!-- submit-bar -->\r\n    <van-submit-bar\r\n      v-show=\"list.length\"\r\n      :price=\"totalMoney\"\r\n      button-text=\"提交订单\"\r\n      @submit=\"onsubmit\"\r\n    >\r\n      <van-checkbox v-model=\"checkAll\">全选</van-checkbox>\r\n      <template #tip>\r\n        <!-- 你的收货地址不支持同城送, <span>修改地址</span> -->\r\n      </template>\r\n    </van-submit-bar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from \"vant\";\r\nimport { changeGoods, deleteGoods } from \"../../api/index\";\r\nexport default {\r\n  name: \"Cart\",\r\n  mounted() {\r\n    //进来就获取购物车的数据\r\n    this.$store.dispatch(\"changeCartListAsync\");\r\n  },\r\n  data() {\r\n    return {\r\n      value: 1,\r\n    };\r\n  },\r\n  methods: {\r\n    goHome() {\r\n      this.$router.push(\"/home\");\r\n      console.log(this);\r\n    },\r\n    //去选地址\r\n    onsubmit() {\r\n      let ids = [];\r\n      this.list.forEach((item) => {\r\n        if (item.checked == true) {\r\n          ids.push(item.cartItemId);\r\n        }\r\n      });\r\n      let idss = JSON.stringify(ids);\r\n      sessionStorage.setItem(\"ids\", idss);\r\n      this.$router.push({\r\n        path: \"/addressList\",\r\n        // query: { cartItemIds: ids }\r\n      });\r\n    },\r\n    //删除购物车的某一个商品\r\n    deleteCartitem(val) {\r\n      deleteCartList(val);\r\n      this.$store.dispatch(\"changeCartListAsync\");\r\n    },\r\n\r\n    // 改变商品数量\r\n    onChange(e, id) {\r\n      Toast.loading({ forbidClick: true });\r\n      changeGoods(id, e).then(\r\n        (data) => {\r\n          if (data.resultCode === 200) {\r\n            Toast.clear();\r\n            //重新获取购物车\r\n            this.$store.dispatch(\"changeCartListAsync\");\r\n          }\r\n        },\r\n        (error) => {\r\n          Toast.fail(\"商品上限！\");\r\n        }\r\n      );\r\n    },\r\n  },\r\n  computed: {\r\n    //通过计算属性拿到Vuex state\r\n    list: {\r\n      get() {\r\n        return this.$store.state.cartList;\r\n      },\r\n    },\r\n    //总价\r\n    totalMoney() {\r\n      return this.list.reduce((prev, cur) => {\r\n        // 按照选中的商品计算的 （checked）\r\n        return (\r\n          prev + (cur.checked ? cur.goodsCount * cur.sellingPrice * 100 : 0)\r\n        );\r\n      }, 0);\r\n    },\r\n    //是否全选\r\n    checkAll: {\r\n      get() {\r\n        //依赖item.checked每当item.checked发生变化就执行一次getter\r\n        return this.list.every((item) => item.checked);\r\n      },\r\n      set(val) {\r\n        console.log(val);\r\n        // checkAll改变就执行\r\n        this.list.forEach((item) => (item.checked = val));\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.van-card {\r\n  position: relative;\r\n\r\n  .van-card__header {\r\n    margin-left: 0.8rem;\r\n  }\r\n}\r\n\r\n.van-check {\r\n  position: absolute;\r\n  top: 1.0667rem;\r\n  left: 0.2667rem;\r\n  z-index: 999;\r\n}\r\n\r\n.van-stepper {\r\n  position: absolute;\r\n  bottom: 0;\r\n  right: 0.5333rem;\r\n  z-index: 999;\r\n}\r\n\r\n.container {\r\n  // margin-top: 1.2rem;\r\n  margin-bottom: 3.7333rem;\r\n}\r\n\r\n.van-submit-bar {\r\n  bottom: 50px;\r\n}\r\n\r\n.delete-button {\r\n  height: 100%;\r\n  background-color: #08d9d6;\r\n}\r\n\r\n/deep/.van-checkbox__icon--checked .van-icon {\r\n  background-color: #08d9d6;\r\n  border-color: #08d9d6;\r\n}\r\n\r\n.van-submit-bar__button--danger {\r\n  background: linear-gradient(to right, #00adb5, #08d9d6);\r\n}\r\n\r\n.van-nav-bar .van-icon {\r\n  color: #08d9d6;\r\n}\r\n\r\n.empty {\r\n  margin: 0 auto;\r\n  text-align: center;\r\n  width: 50%;\r\n  font-size: 0.5rem;\r\n\r\n  .van-icon-smile-o {\r\n    font-size: 1.5rem;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=b6168fbe&scoped=true&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Cart.vue?vue&type=style&index=0&id=b6168fbe&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b6168fbe\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","on","$event","$router","back","scopedSlots","_u","key","fn","proxy","staticClass","_l","list","item","goodsId","deleteCartitem","cartItemId","model","value","checked","callback","$$v","$set","expression","sellingPrice","goodsName","goodsCoverImg","goodsCount","onChange","directives","name","rawName","length","goHome","_v","_m","totalMoney","onsubmit","checkAll","staticRenderFns","staticStyle","mounted","data","methods","console","ids","sessionStorage","path","deleteCartList","forbidClick","changeGoods","error","computed","get","prev","set","component"],"sourceRoot":""}